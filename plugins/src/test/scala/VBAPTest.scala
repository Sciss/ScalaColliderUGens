import de.sciss.synth.ugen.VBAPSetup

// XXX TODO -- could be a Scala-Test suite
object VBAPTest extends App {
  import VBAPSetup.Polar

  def printSetup(s: VBAPSetup) =
    println(s.bufferData.map(x => f"$x%1.2f").mkString("[", ", ", "]"))

  val s1 = VBAPSetup(2, Seq[Polar](-30, 30, 0, -110, 110)) // 5.1 array
  println("--- 5.1 array ---")
  printSetup(s1)
  // sclang
  // [ 2, 5, 4, 1, -0.51, -0.88, 0.95, -0.35, 1, 3, 0, -2, 1, 1.73, 3, 2, 1, -1.73, -0, 2, 2, 5, 0.95, 0.35, -0.51, 0.88, 5, 4, -1.46, 0.53, -1.46, -0.53]
  // scala
  // [ 2, 5, 4, 1, -0.51, -0.88, 0.95, -0.35, 1, 3, 0, -2, 1, 1.73, 3, 2, 1, -1.73, -0, 2, 2, 5, 0.95, 0.35, -0.51, 0.88, 5, 4, -1.46, 0.53, -1.46, -0.53]

  val s2 = VBAPSetup(3, Seq[Polar](
     -22.5 -> 14.97,  22.5 -> 14.97,
     -67.5 -> 14.97,  67.5 -> 14.97,
    -112.5 -> 14.97, 112.5 -> 14.97,
    -157.5 -> 14.97, 157.5 -> 14.97,
     -45.0 ->  0.0 ,  45.0 ->  0.0,
     -90.0 ->  0.0 ,  90.0 ->  0.0,
    -135.0 ->  0.0 , 135.0 ->  0.0,
       0.0 ->  0.0 , 180.0 ->  0.0)) // zig zag partial dome

  println("--- zig zag partial dome ---")
  printSetup(s2)

  // sclang
  // [ 3, 16, 1, 2, 3, 3.27, -1.35, -9.35, -1.35, 1.35, 6.61, -1.91, -0, 6.61, 0.89, 0.89, 0.37, -0.37, 0.37, -0.89, 0.26, 0.26, 0.26, 1, 2, 15, -0, -1.35, 1.94, -0, 1.35, 1.94, 1, 0, -3.46, 0.89, 0.89, 1, -0.37, 0.37...etc...
  // scala
  // [ 3, 16, 1, 2, 3, 3.27, -1.35, -9.35, -1.35, 1.35, 6.61, -1.91, -0, 6.61, 0.89, 0.89, 0.37, -0.37, 0.37, -0.89, 0.26, 0.26, 0.26, 1, 2, 15, -0, -1.35, 1.94, -0, 1.35, 1.94, 1, 0, -3.46, 0.89, 0.89, 1, -0.37, 0.37...etc...
}